// worker.js - Cloudflare Worker å®Œæ•´ä»£ç 
export default {
  async fetch(request, env, ctx) {
    // 1. æ•°æ®é€»è¾‘éƒ¨åˆ†
    const pageTitle = "é˜¿é©¬å°”è²æµ·å²¸ç§˜å¢ƒä¹‹æ—…";
    const destinations = [
      {
        id: 1,
        name: "æ³¢è¥¿å¡”è¯º",
        description: "åœ°ä¸­æµ·æœ€ä¸Šé•œçš„æ‚¬å´–å°é•‡ï¼Œé»„æ˜æ—¶åˆ†å½©è‰²æˆ¿å±‹ä¸æ™šéœäº¤ç›¸è¾‰æ˜ ã€‚æ¨èåœ¨Da Adolfoæµ·æ»©ä¿±ä¹éƒ¨äº«å—è½æ—¥é¸¡å°¾é…’ã€‚",
        highlights: ["æ–¯çš®äºšæ ¼äºšæµ·æ»©", "åœ£æ¯å‡å¤©æ•™å ‚", "Path of the Godså¾’æ­¥"],
        image: "https://example-cdn.com/amalfi/01.jpg", // æ›¿æ¢ä¸ºæ‚¨çš„CDNé“¾æ¥
        tips: "5æœˆæˆ–9æœˆæ¥è®¿é¿å¼€äººæµï¼Œæ¨èå…¥ä½Le Sirenuseé…’åº—çš„æµ·æ™¯æˆ¿"
      },
      {
        id: 2,
        name: "é˜¿é©¬å°”è²é•‡",
        description: "ä¸­ä¸–çºªæµ·ä¸Šå…±å’Œå›½çš„è¾‰ç…Œé—è¿¹ï¼Œå¤§æ•™å ‚çš„é’é“œé—¨å’Œå…‹è±è’™è’‚è¯ºå¡”æ¥¼ä¸å®¹é”™è¿‡ã€‚",
        highlights: ["åœ£å®‰å¾·çƒˆå¤§æ•™å ‚", "æ‰‹å·¥é€ çº¸åšç‰©é¦†", "Valle dei Muliniå³¡è°·"],
        image: "https://example-cdn.com/amalfi/02.jpg",
        tips: "å°è¯•å½“åœ°ç‰¹è‰²ç”œå“Delizia al Limoneï¼Œè´­ä¹°æ‰‹å·¥æŸ æª¬çš‚ä½œä¼´æ‰‹ç¤¼"
      },
      {
        id: 3,
        name: "æ‹‰éŸ¦æ´›",
        description: "è‰ºæœ¯å®¶åçˆ±çš„å±±é¡¶æ¡ƒæºï¼Œé²è²æ´›åˆ«å¢…çš„èŠ±å›­æ˜¯ã€Šåæ—¥è°ˆã€‹çš„çµæ„Ÿæ¥æºã€‚",
        highlights: ["è¾›æ³¢ä¹ƒåˆ«å¢…æ— é™éœ²å°", "ç“¦æ ¼çº³éŸ³ä¹èŠ‚", "Villa CimbroneèŠ±å›­"],
        image: "https://example-cdn.com/amalfi/03.jpg",
        tips: "æ¸…æ™¨å‰å¾€è§‚æ™¯å°å¯çœ‹åˆ°äº‘æµ·æ¼«è¿‡æµ·å²¸çº¿çš„å¥‡è§‚"
      }
    ];

    const travelEssentials = [
      "ğŸšŒ äº¤é€šï¼šå»ºè®®è´­ä¹°Unico Costiera 3æ—¥é€šç¥¨ï¼ˆâ‚¬25ï¼‰",
      "ğŸ‹ ç¾é£Ÿï¼šå¿…å°Scialatielliæµ·é²œé¢å’ŒæŸ æª¬å†°æ·‡æ·‹",
      "âš ï¸ å®‰å…¨ï¼šSå‹æ²¿æµ·å…¬è·¯é™é€Ÿ30km/hï¼Œæ–°æ‰‹ä¸å»ºè®®è‡ªé©¾"
    ];

    // 2. HTMLæ¨¡æ¿
    const html = `<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>${pageTitle}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="æ„å¤§åˆ©é˜¿é©¬å°”è²æµ·å²¸æ·±åº¦æ—…è¡ŒæŒ‡å—">
  <style>
    :root {
      --blue: #2a5f8a;
      --green: #6b8e23;
      --gold: #d4a017;
      --text: #333;
      --bg: #f9f9f9;
    }
    body {
      font-family: 'Noto Sans SC', 'Microsoft YaHei', sans-serif;
      line-height: 1.8;
      color: var(--text);
      background: var(--bg);
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    header {
      text-align: center;
      padding: 4rem 0;
      background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), 
                  url('https://example-cdn.com/amalfi/header.jpg') center/cover;
      color: white;
      margin-bottom: 3rem;
      border-radius: 0 0 20px 20px;
    }
    h1 {
      font-size: 2.8rem;
      margin-bottom: 1rem;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.6);
    }
    .subtitle {
      font-size: 1.2rem;
      opacity: 0.9;
    }
    .destination-card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      margin-bottom: 2.5rem;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .destination-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 25px rgba(0,0,0,0.15);
    }
    .destination-image {
      width: 100%;
      height: 380px;
      object-fit: cover;
      border-bottom: 4px solid var(--gold);
    }
    .destination-content {
      padding: 1.8rem;
    }
    .highlights {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 1.2rem 0;
    }
    .highlight-tag {
      background: var(--gold);
      color: white;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
    }
    .tip-card {
      background: #f0f7ff;
      padding: 1rem;
      border-radius: 8px;
      margin-top: 1.5rem;
    }
    footer {
      text-align: center;
      padding: 2rem;
      color: var(--blue);
      border-top: 1px solid #eee;
    }
    @media (max-width: 768px) {
      h1 { font-size: 2.2rem; }
      .destination-image { height: 280px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>${pageTitle}</h1>
    <p class="subtitle">æ¢ç´¢åœ°ä¸­æµ·å²¸çš„å®çŸ³ï¼šä»æ³¢è¥¿å¡”è¯ºåˆ°æ‹‰éŸ¦æ´›</p>
  </header>

  <main>
    ${destinations.map(dest => `
      <article class="destination-card">
        <img src="${dest.image}" alt="${dest.name}" 
             class="destination-image" loading="lazy" width="800" height="450">
        <div class="destination-content">
          <h2>${dest.name}</h2>
          <p>${dest.description}</p>
          <div class="highlights">
            ${dest.highlights.map(item => `
              <span class="highlight-tag">${item}</span>
            `).join('')}
          </div>
          <div class="tip-card">
            <h3>âœ¨ æœ¬åœ°äººå»ºè®®</h3>
            <p>${dest.tips}</p>
          </div>
        </div>
      </article>
    `).join('')}

    <section class="tip-card" style="margin: 3rem auto; max-width: 800px;">
      <h2 style="text-align: center; color: var(--blue);">ğŸ“‹ æ—…è¡Œå¿…å¤‡çŸ¥è¯†</h2>
      <ul style="padding-left: 1.2rem;">
        ${travelEssentials.map(item => `
          <li style="margin-bottom: 0.8rem;">${item}</li>
        `).join('')}
      </ul>
    </section>
  </main>

  <footer>
    <p>Â© ${new Date().getFullYear()} é˜¿é©¬å°”è²æµ·å²¸æ—…è¡ŒæŒ‡å— Â· 
       <a href="/privacy" style="color: var(--blue);">éšç§æ”¿ç­–</a></p>
  </footer>
</body>
</html>`;

    // 3. è¿”å›å“åº”
    return new Response(html, {
      headers: {
        'Content-Type': 'text/html; charset=utf-8',
        'Cache-Control': 'public, max-age=3600'
      }
    });
  }
}
